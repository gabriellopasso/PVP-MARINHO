<!DOCTYPE html>
<html lang="pt-br">
    <style>
        #tela{
            border: 10px solid grey;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            image-rendering: -moz-crisp-edges;
            width: 400px;
            height: 400px;
                }
    </style>
    <head>
        <meta charset="UTF-8">
        <title>Boas vindas</title>  
    </head>
    <body>
        <canvas id="tela" width="10" height="10"></canvas>
    
        <script type="module">
            import createKeyboardListener from './keyboard-listener.js'
            import createGame from './createGame.js'
            const tela = document.getElementById('tela')
            const context = tela.getContext('2d')
            const currentPlayerId = 'player1'
            
            const game = createGame()
            const keyboardListener = createKeyboardListener()
            keyboardListener.subscribe(game.movePlayer)

            game.addPlayer({playerId: 'player2', playerX: 0, playerY: 0})
            game.addFruit({fruitId: 'fruit2', fruitX: 3, fruitY: 3})
            //game.addPlayer(game.createState())
            
            

            renderScreen()
            
            function renderScreen(){
                context.fillStyle = 'white'
                context.fillRect(0, 0, 10, 10)
                
                for (const itens in game.state.frutas) {
                    const fruit = game.state.frutas[itens]
                    context.fillStyle = '#08a331'
                    context.fillRect(fruit.x, fruit.y, 1, 1 )
                }
                
                for (const itens in game.state.jogadores){
                    const item = game.state.jogadores[itens]
                    context.fillStyle = '#000000'
                    context.fillRect(item.x, item.y, 1, 1)
                }
                        
                requestAnimationFrame(renderScreen)
            }    
        </script>
    </body>
</html>